
concat_steane_start = '''#first we want to encode the ciruit
MPP X0*X1*X2*X6
MPP X2*X3*X4*X6
MPP X4*X5*X0*X6

MPP X7*X8*X9*X13
MPP X9*X10*X11*X13
MPP X11*X12*X7*X13

MPP X14*X15*X16*X20
MPP X16*X17*X18*X20
MPP X18*X19*X14*X20

MPP X21*X22*X23*X27
MPP X23*X24*X25*X27
MPP X25*X26*X21*X27

MPP X28*X29*X30*X34
MPP X30*X31*X32*X34
MPP X32*X33*X28*X34

MPP X35*X36*X37*X41
MPP X37*X38*X39*X41
MPP X39*X40*X35*X41

MPP X42*X43*X44*X48
MPP X44*X45*X46*X48
MPP X46*X47*X42*X48

#Weight12generators
MPP X1*X12*X17*X47*X2*X7*X18*X42*X3*X8*X19*X43
MPP X15*X26*X31*X43*X16*X21*X32*X44*X17*X22*X33*X45
MPP X29*X40*X3*X45*X30*X35*X4*X46*X31*X36*X5*X47

TICK
R 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72
H 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72
R 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97

#CNOT for X stabelizers
TICK
CX 49 0 49 1 49 2 49 6
CX 50 2 50 3 50 4 50 6
CX 51 4 51 5 51 0 51 6
TICK

CX 52 7 52 8 52 9 52 13
CX 53 9 53 10 53 11 53 13
CX 54 11 54 12 54 7 54 13

TICK

CX 55 14 55 15 55 16 55 20
CX 56 16 56 17 56 18 56 20
CX 57 18 57 19 57 14 57 20

TICK

CX 58 21 58 22 58 23 58 27
CX 59 23 59 24 59 25 59 27
CX 60 25 60 26 60 21 60 27

TICK

CX 61 28 61 29 61 30 61 34
CX 62 30 62 31 62 32 62 34
CX 63 32 63 33 63 28 63 34

TICK

CX 64 35 64 36 64 37 64 41
CX 65 37 65 38 65 39 65 41
CX 66 39 66 40 66 35 66 41

TICK

CX 67 42 67 43 67 44 67 48
CX 68 44 68 45 68 46 68 48
CX 69 46 69 47 69 42 69 48

TICK
#W12 X
CX 70 1 70 12 70 17 70 47 70 2 70 7 70 18 70 42 70 3 70 8 70 19 70 43
CX 71 15 71 26 71 31 71 43 71 16 71 21 71 32 71 44 71 17 71 22 71 33 71 45
CX 72 29 72 40 72 3 72 45 72 30 72 35 72 4 72 46 72 31 72 36 72 5 72 47

TICK
#CNOT for Z stabelizers
CX 0 73 1 73 2 73 6 73
CX 2 74 3 74 4 74 6 74
CX 4 75 5 75 0 75 6 75

TICK

CX 7 76 8 76 9 76 13 76
CX 9 77 10 77 11 77 13 77
CX 11 78 12 78 7 78 13 78

TICK

CX 14 79 15 79 16 79 20 79
CX 16 80 17 80 18 80 20 80
CX 18 81 19 81 14 81 20 81

TICK

CX 21 82 22 82 23 82 27 82
CX 23 83 24 83 25 83 27 83
CX 25 84 26 84 21 84 27 84

TICK

CX 28 85 29 85 30 85 34 85
CX 30 86 31 86 32 86 34 86
CX 32 87 33 87 28 87 34 87

TICK

CX 35 88 36 88 37 88 41 88
CX 37 89 38 89 39 89 41 89
CX 39 90 40 90 35 90 41 90

TICK

CX 42 91 43 91 44 91 48 91
CX 44 92 45 92 46 92 48 92
CX 46 93 47 93 42 93 48 93

TICK

#weight 12 Z
CX 1 94 12 94 17 94 47 94 2 94 7 94 18 94 42 94 3 94 8 94 19 94 43 94
CX 15 95 26 95 31 95 43 95 16 95 21 95 32 95 44 95 17 95 22 95 33 95 45 95
CX 29 96 40 96 3 96 45 96 30 96 35 96 4 96 46 96 31 96 36 96 5 96 47 96

TICK
#Mesurable observable

H 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72
MR 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72
MR 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96


TICK

DETECTOR rec[-48] rec[-72]
DETECTOR rec[-47] rec[-71]
DETECTOR rec[-46] rec[-70]
DETECTOR rec[-45] rec[-69]
DETECTOR rec[-44] rec[-68]
DETECTOR rec[-43] rec[-67]
DETECTOR rec[-42] rec[-66]
DETECTOR rec[-41] rec[-65]
DETECTOR rec[-40] rec[-64]
DETECTOR rec[-39] rec[-63]
DETECTOR rec[-38] rec[-62]
DETECTOR rec[-37] rec[-61]
DETECTOR rec[-36] rec[-60]
DETECTOR rec[-35] rec[-59]
DETECTOR rec[-34] rec[-58]
DETECTOR rec[-33] rec[-57]
DETECTOR rec[-32] rec[-56]
DETECTOR rec[-31] rec[-55]
DETECTOR rec[-30] rec[-54]
DETECTOR rec[-29] rec[-53]
DETECTOR rec[-28] rec[-52]
DETECTOR rec[-27] rec[-51]
DETECTOR rec[-26] rec[-50]
DETECTOR rec[-25] rec[-49]
DETECTOR rec[-24]
DETECTOR rec[-23]
DETECTOR rec[-22]
DETECTOR rec[-21]
DETECTOR rec[-20]
DETECTOR rec[-19]
DETECTOR rec[-18]
DETECTOR rec[-17]
DETECTOR rec[-16]
DETECTOR rec[-15]
DETECTOR rec[-14]
DETECTOR rec[-13]
DETECTOR rec[-12]
DETECTOR rec[-11]
DETECTOR rec[-10]
DETECTOR rec[-9]
DETECTOR rec[-8]
DETECTOR rec[-7]
DETECTOR rec[-6]
DETECTOR rec[-5]
DETECTOR rec[-4]
DETECTOR rec[-3]
DETECTOR rec[-2]
DETECTOR rec[-1]'''



concat_steane_round = '''#Next Round
H 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72

#CNOT for X stabelizers
TICK
CX 49 0 49 1 49 2 49 6
CX 50 2 50 3 50 4 50 6
CX 51 4 51 5 51 0 51 6
TICK

CX 52 7 52 8 52 9 52 13
CX 53 9 53 10 53 11 53 13
CX 54 11 54 12 54 7 54 13

TICK

CX 55 14 55 15 55 16 55 20
CX 56 16 56 17 56 18 56 20
CX 57 18 57 19 57 14 57 20

TICK

CX 58 21 58 22 58 23 58 27
CX 59 23 59 24 59 25 59 27
CX 60 25 60 26 60 21 60 27

TICK

CX 61 28 61 29 61 30 61 34
CX 62 30 62 31 62 32 62 34
CX 63 32 63 33 63 28 63 34

TICK

CX 64 35 64 36 64 37 64 41
CX 65 37 65 38 65 39 65 41
CX 66 39 66 40 66 35 66 41

TICK

CX 67 42 67 43 67 44 67 48
CX 68 44 68 45 68 46 68 48
CX 69 46 69 47 69 42 69 48

TICK
#W12 X
CX 70 1 70 12 70 17 70 47 70 2 70 7 70 18 70 42 70 3 70 8 70 19 70 43
CX 71 15 71 26 71 31 71 43 71 16 71 21 71 32 71 44 71 17 71 22 71 33 71 45
CX 72 29 72 40 72 3 72 45 72 30 72 35 72 4 72 46 72 31 72 36 72 5 72 47

TICK
#CNOT for Z stabelizers
CX 0 73 1 73 2 73 6 73
CX 2 74 3 74 4 74 6 74
CX 4 75 5 75 0 75 6 75

TICK

CX 7 76 8 76 9 76 13 76
CX 9 77 10 77 11 77 13 77
CX 11 78 12 78 7 78 13 78

TICK

CX 14 79 15 79 16 79 20 79
CX 16 80 17 80 18 80 20 80
CX 18 81 19 81 14 81 20 81

TICK

CX 21 82 22 82 23 82 27 82
CX 23 83 24 83 25 83 27 83
CX 25 84 26 84 21 84 27 84

TICK

CX 28 85 29 85 30 85 34 85
CX 30 86 31 86 32 86 34 86
CX 32 87 33 87 28 87 34 87

TICK

CX 35 88 36 88 37 88 41 88
CX 37 89 38 89 39 89 41 89
CX 39 90 40 90 35 90 41 90

TICK

CX 42 91 43 91 44 91 48 91
CX 44 92 45 92 46 92 48 92
CX 46 93 47 93 42 93 48 93

TICK

#weight 12 Z
CX 1 94 12 94 17 94 47 94 2 94 7 94 18 94 42 94 3 94 8 94 19 94 43 94
CX 15 95 26 95 31 95 43 95 16 95 21 95 32 95 44 95 17 95 22 95 33 95 45 95
CX 29 96 40 96 3 96 45 96 30 96 35 96 4 96 46 96 31 96 36 96 5 96 47 96

TICK
#Mesurable observable

H 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72
MR 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72
MR 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96


TICK

DETECTOR rec[-48] rec[-96]
DETECTOR rec[-47] rec[-95]
DETECTOR rec[-46] rec[-94]
DETECTOR rec[-45] rec[-93]
DETECTOR rec[-44] rec[-92]
DETECTOR rec[-43] rec[-91]
DETECTOR rec[-42] rec[-90]
DETECTOR rec[-41] rec[-89]
DETECTOR rec[-40] rec[-88]
DETECTOR rec[-39] rec[-87]
DETECTOR rec[-38] rec[-86]
DETECTOR rec[-37] rec[-85]
DETECTOR rec[-36] rec[-84]
DETECTOR rec[-35] rec[-83]
DETECTOR rec[-34] rec[-82]
DETECTOR rec[-33] rec[-81]
DETECTOR rec[-32] rec[-80]
DETECTOR rec[-31] rec[-79]
DETECTOR rec[-30] rec[-78]
DETECTOR rec[-29] rec[-77]
DETECTOR rec[-28] rec[-76]
DETECTOR rec[-27] rec[-75]
DETECTOR rec[-26] rec[-74]
DETECTOR rec[-25] rec[-73]
DETECTOR rec[-24] rec[-72]
DETECTOR rec[-23] rec[-71]
DETECTOR rec[-22] rec[-70]
DETECTOR rec[-21] rec[-69]
DETECTOR rec[-20] rec[-68]
DETECTOR rec[-19] rec[-67]
DETECTOR rec[-18] rec[-66]
DETECTOR rec[-17] rec[-65]
DETECTOR rec[-16] rec[-64]
DETECTOR rec[-15] rec[-63]
DETECTOR rec[-14] rec[-62]
DETECTOR rec[-13] rec[-61]
DETECTOR rec[-12] rec[-60]
DETECTOR rec[-11] rec[-59]
DETECTOR rec[-10] rec[-58]
DETECTOR rec[-9] rec[-57]
DETECTOR rec[-8] rec[-56]
DETECTOR rec[-7] rec[-55]
DETECTOR rec[-6] rec[-54]
DETECTOR rec[-5] rec[-53]
DETECTOR rec[-4] rec[-52]
DETECTOR rec[-3] rec[-51]
DETECTOR rec[-2] rec[-50]
DETECTOR rec[-1] rec[-49]'''

concat_steane_end = '''TICK
CX 97 0 97 1 97 2 97 3 97 4 97 5 97 6 97 7 97 8 97 9 97 10 97 11 97 12 97 13 97 14 97 15 97 16 97 17 97 18 97 19 97 20 97 21 97 22 97 23 97 24 97 25 97 26 97 27 97 28 97 29 97 30 97 31 97 32 97 33 97 34 97 35 97 36 97 37 97 38 97 39 97 40 97 41 97 42 97 43 97 44 97 45 97 46 97 47 97 48
MR 97
OBSERVABLE_INCLUDE(0) rec[-1]'''


normal_steane_start = '''MPP X3*X4*X5*X6
MPP X1*X2*X5*X6
MPP X0*X2*X4*X6
TICK

# ——— Round 1: ancilla prep ———
# RX is “reset to |+>” (no rec), R is “reset to |0>” (no rec)
R 7 8 9
H 7 8 9
R  10 11 12
TICK

# ——— Round 1: entangle X‐synd and Z‐synd ancillas ———
CX 7 6 8 5
TICK
CX 7 2 8 1
TICK
CX 7 4 8 6
TICK
CX 7 0 8 2 9 5
TICK
CX 9 6
TICK
CX 9 3
TICK
CX 9 4
TICK

# CNOTs for Z stabilizers
CX 6 12
TICK
CX 3 12
TICK
CX 4 12
TICK
CX 6 10 5 11
TICK
CX 2 10 1 11
TICK
CX 4 10 6 11
TICK
CX 0 10 2 11 5 12
TICK

# ——— Round 1: measure ancillas into rec bits ———
H 7 8 9
MR 7 8 9      # X‐basis measures → rec bits #4,5,6 of this “measurement block”
MR  10 11 12   # Z‐basis measures → rec bits #1,2,3 of this block
TICK

DETECTOR rec[-6] rec[-7]        
DETECTOR rec[-5] rec[-8]        
DETECTOR rec[-4] rec[-9]       
DETECTOR rec[-3]         # Z‐stab on (3,4,5,6)
DETECTOR rec[-2]         # Z‐stab on (1,2,5,6)
DETECTOR rec[-1]         # Z‐stab on (0,2,4,6)'''

normal_steane_round = '''
H 7 8 9
CX 7 6 8 5
TICK
CX 7 2 8 1
TICK
CX 7 4 8 6
TICK
CX 7 0 8 2 9 5
TICK
CX 9 6
TICK
CX 9 3
TICK
CX 9 4
TICK

# CNOTs for Z stabilizers
CX 6 12
TICK
CX 3 12
TICK
CX 4 12
TICK
CX 6 10 5 11
TICK
CX 2 10 1 11
TICK
CX 4 10 6 11
TICK
CX 0 10 2 11 5 12
TICK

# ——— Round 1: measure ancillas into rec bits ———
H 7 8 9
MR 7 8 9      # X‐basis measures → rec bits #4,5,6 of this “measurement block”
MR  10 11 12   # Z‐basis measures → rec bits #1,2,3 of this block
TICK

DETECTOR rec[-6] rec[-12]        
DETECTOR rec[-5] rec[-11]        
DETECTOR rec[-4] rec[-10]       
DETECTOR rec[-3] rec[-9]        # Z‐stab on (3,4,5,6)
DETECTOR rec[-2] rec[-8]        # Z‐stab on (1,2,5,6)
DETECTOR rec[-1] rec[-7]        # Z‐stab on (0,2,4,6)
'''

normal_steane_end ='''CX 13 0  13 1  13 2  13 3  13 4  13 5  13 6
MR 13
OBSERVABLE_INCLUDE(0) rec[-1]''' 